{"version":3,"sources":["./node_modules/@capacitor-community/barcode-scanner/dist/esm/definitions.js","./node_modules/@capacitor-community/barcode-scanner/dist/esm/index.js","./src/app/pages/scaner/scaner-routing.module.ts","./src/app/pages/scaner/scaner.module.ts","./src/app/pages/scaner/scaner.page.ts","./src/app/pages/scaner/scaner.page.scss","./src/app/pages/scaner/scaner.page.html"],"names":[],"mappings":"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","file":"src_app_pages_scaner_scaner_module_ts.js","sourcesContent":["export var SupportedFormat;\n(function (SupportedFormat) {\n    // 1D Product\n    SupportedFormat[\"UPC_A\"] = \"UPC_A\";\n    SupportedFormat[\"UPC_E\"] = \"UPC_E\";\n    SupportedFormat[\"UPC_EAN_EXTENSION\"] = \"UPC_EAN_EXTENSION\";\n    SupportedFormat[\"EAN_8\"] = \"EAN_8\";\n    SupportedFormat[\"EAN_13\"] = \"EAN_13\";\n    // 1D Industrial\n    SupportedFormat[\"CODE_39\"] = \"CODE_39\";\n    SupportedFormat[\"CODE_39_MOD_43\"] = \"CODE_39_MOD_43\";\n    SupportedFormat[\"CODE_93\"] = \"CODE_93\";\n    SupportedFormat[\"CODE_128\"] = \"CODE_128\";\n    SupportedFormat[\"CODABAR\"] = \"CODABAR\";\n    SupportedFormat[\"ITF\"] = \"ITF\";\n    SupportedFormat[\"ITF_14\"] = \"ITF_14\";\n    // 2D\n    SupportedFormat[\"AZTEC\"] = \"AZTEC\";\n    SupportedFormat[\"DATA_MATRIX\"] = \"DATA_MATRIX\";\n    SupportedFormat[\"MAXICODE\"] = \"MAXICODE\";\n    SupportedFormat[\"PDF_417\"] = \"PDF_417\";\n    SupportedFormat[\"QR_CODE\"] = \"QR_CODE\";\n    SupportedFormat[\"RSS_14\"] = \"RSS_14\";\n    SupportedFormat[\"RSS_EXPANDED\"] = \"RSS_EXPANDED\";\n})(SupportedFormat || (SupportedFormat = {}));\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\nconst BarcodeScanner = registerPlugin('BarcodeScanner', {\n    web: () => import('./web').then(m => new m.BarcodeScannerWeb()),\n});\nexport * from './definitions';\nexport { BarcodeScanner };\n//# sourceMappingURL=index.js.map","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ScanerPage } from './scaner.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ScanerPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ScanerPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ScanerPageRoutingModule } from './scaner-routing.module';\n\nimport { ScanerPage } from './scaner.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ScanerPageRoutingModule\n  ],\n  declarations: [ScanerPage]\n})\nexport class ScanerPageModule {}\n","import { DetalleReservaPage } from './../detalle-reserva/detalle-reserva.page';\nimport { Component, OnInit } from '@angular/core';\nimport { ModalController, AlertController, MenuController } from '@ionic/angular';\nimport { BarcodeScanner } from '@capacitor-community/barcode-scanner';\nimport { UserService } from 'src/app/services/user.service';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-scaner',\n  templateUrl: './scaner.page.html',\n  styleUrls: ['./scaner.page.scss'],\n})\nexport class ScanerPage implements OnInit {\n  result = null;\n  scanActive = false;\n\n\n  constructor( public modal:ModalController, \n    public alert:AlertController,\n    public menu:MenuController,\n    public _user:UserService,\n    private router:Router) {}\n  ngOnInit(){\n    if(!this._user.empresa){\n      console.log(\"sin empresa seleccionada\")\n      this.router.navigate(['/bienvenida']);\n    }\n  }\n  openMenu() {\n    this.menu.enable(true, 'first');    \n    this.menu.open('first');\n  }\n  ngAfterViewInit() {\n    BarcodeScanner.prepare();\n  }\n\n  ngOnDestroy() {\n    this.stopScanner()\n  }\n\n  async reserva(){\n    //var rut = this.obtenerData('https://wwwwasdasd.com?RUN=17768997-1&type=CEDULA&serial=1233243453465');\n    const modal = await this.modal.create({\n      component:DetalleReservaPage,\n      animated: true,\n      mode: 'ios',\n      backdropDismiss:false,\n      cssClass: 'reserva-modal',\n      componentProps: {\n        'rut': this.result,\n      },     \n    })\n    return await modal.present();\n  }\n\n  async startScanner(){\n    const allowed = await this.checkPermission();\n    if(allowed){\n      this.scanActive = true;\n      const result = await BarcodeScanner.startScan();\n      if(result.hasContent){\n        this.result = await this.obtenerData(result.content);\n        this.scanActive = false;\n        this.reserva();\n      }\n    }    \n  }\n\n  async stopScanner(){    \n    BarcodeScanner.stopScan();\n    this.scanActive = false;\n  }\n\n  async checkPermission(){\n    return new Promise(async (resolve, reject)=>{\n      const status = await BarcodeScanner.checkPermission({force:true});\n      if(status.granted){\n        resolve(true);\n      }else if(status.denied){\n        const alert = await this.alert.create({\n          header:'No permission',\n          message: 'Please allow camera access in your settings ',\n          buttons:[{\n            text:'No',\n            role:'cancel'\n          },\n        {\n          text:'Open Settings',\n          handler:() =>{\n            BarcodeScanner.openAppSettings();\n            resolve(false);\n          }\n        }]\n        })\n      }else{\n        resolve(false)\n      }\n    })\n  }\n\n\n  obtenerData(data:string){\n    console.log(data)\n    let variables = data.split('?');\n    let campos = variables[1].split('&');\n    let arr = [];\n\n    for(let a=0;a<campos.length;a++){\n      let dato = campos[a].split(\"=\");\n      if(dato[0].toLowerCase()==\"run\"){\n        arr.push({'rut':dato[1]});\n      }\n    }\n    console.log(arr)\n    return arr[0].rut;\n  }\n\n}\n","export default \".new-background-color {\\n  --background: #5501bc;\\n}\\n\\nion-content {\\n  --background: transparent;\\n}\\n\\nion-toolbar ion-button {\\n  --background:transparent;\\n}\\n\\nion-title.md.title-default.hydrated {\\n  color: #fff;\\n  text-align: left;\\n}\\n\\nion-button {\\n  --background: #c200d4;\\n}\\n\\n.iniciar {\\n  height: 50px;\\n  position: absolute;\\n  top: 40%;\\n  width: 100%;\\n}\\n\\n.cerrar {\\n  height: 40px;\\n  position: absolute;\\n  bottom: 15%;\\n  width: 100%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjYW5lci5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxxQkFBQTtBQUNKOztBQUNBO0VBQ0kseUJBQUE7QUFFSjs7QUFBQTtFQUNJLHdCQUFBO0FBR0o7O0FBREE7RUFDSSxXQUFBO0VBQ0EsZ0JBQUE7QUFJSjs7QUFEQTtFQUNJLHFCQUFBO0FBSUo7O0FBRkE7RUFDSSxZQUFBO0VBQ0Esa0JBQUE7RUFDQSxRQUFBO0VBQ0EsV0FBQTtBQUtKOztBQUhBO0VBQ0ksWUFBQTtFQUNBLGtCQUFBO0VBQ0EsV0FBQTtFQUNBLFdBQUE7QUFNSiIsImZpbGUiOiJzY2FuZXIucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm5ldy1iYWNrZ3JvdW5kLWNvbG9ye1xyXG4gICAgLS1iYWNrZ3JvdW5kOiAjNTUwMWJjO1xyXG59XHJcbmlvbi1jb250ZW50IHtcclxuICAgIC0tYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7IFxyXG59XHJcbmlvbi10b29sYmFyIGlvbi1idXR0b257XHJcbiAgICAtLWJhY2tncm91bmQ6dHJhbnNwYXJlbnQ7XHJcbn1cclxuaW9uLXRpdGxlLm1kLnRpdGxlLWRlZmF1bHQuaHlkcmF0ZWQge1xyXG4gICAgY29sb3I6ICNmZmY7XHJcbiAgICB0ZXh0LWFsaWduOiBsZWZ0O1xyXG59XHJcblxyXG5pb24tYnV0dG9ue1xyXG4gICAgLS1iYWNrZ3JvdW5kOiAjYzIwMGQ0O1xyXG59XHJcbi5pbmljaWFye1xyXG4gICAgaGVpZ2h0OiA1MHB4O1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgdG9wOjQwJTtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG59XHJcbi5jZXJyYXJ7XHJcbiAgICBoZWlnaHQ6IDQwcHg7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBib3R0b206MTUlO1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbn0iXX0= */\";","export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar  class=\\\"new-background-color\\\">\\n    <ion-title>\\n      Scanner   \\n    </ion-title>\\n    <ion-button slot=\\\"end\\\" (click)=\\\"openMenu()\\\">\\n      <ion-icon  name=\\\"menu-outline\\\"></ion-icon>     \\n    </ion-button>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content [fullscreen]=\\\"true\\\" [style.--background]=\\\"scanActive ? '#00000000':'#fff'\\\">\\n  <ion-button expand=\\\"block\\\" (click)=\\\"reserva()\\\" >Mostrar Reserva</ion-button>\\n\\n\\n  <ion-button class=\\\"iniciar\\\" expand=\\\"block\\\" (click)=\\\"startScanner()\\\" [hidden]=\\\"scanActive\\\" >Escanear <ion-icon name=\\\"scan-outline\\\"></ion-icon></ion-button>\\n  <ion-button class=\\\"cerrar\\\" expand=\\\"block\\\" (click)=\\\"stopScanner()\\\" [hidden]=\\\"!scanActive\\\" >Cerrar <ion-icon name=\\\"close-outline\\\"></ion-icon></ion-button>\\n</ion-content>\";"],"sourceRoot":"webpack:///"}