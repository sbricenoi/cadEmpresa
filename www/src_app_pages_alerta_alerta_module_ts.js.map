{"version":3,"sources":["./src/app/pages/alerta/alerta-routing.module.ts","./src/app/pages/alerta/alerta.module.ts","./src/app/pages/alerta/alerta.page.ts","./src/app/pages/alerta/alerta.page.scss","./src/app/pages/alerta/alerta.page.html"],"names":[],"mappings":"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","file":"src_app_pages_alerta_alerta_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { AlertaPage } from './alerta.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AlertaPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AlertaPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { AlertaPageRoutingModule } from './alerta-routing.module';\n\nimport { AlertaPage } from './alerta.page';\nimport { CallNumber } from '@ionic-native/call-number/ngx';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    AlertaPageRoutingModule\n  ],\n  declarations: [AlertaPage],\n  providers:[CallNumber]\n})\nexport class AlertaPageModule {}\n","import { Component, OnInit } from '@angular/core';\n\nimport { MenuController, ToastController } from '@ionic/angular';\nimport { CallNumber } from '@ionic-native/call-number/ngx';\nimport { GeolocationService } from 'src/app/services/geolocation.service';\nimport { NotificationService } from 'src/app/services/notification.service';\nimport { UserService } from 'src/app/services/user.service';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-alerta',\n  templateUrl: './alerta.page.html',\n  styleUrls: ['./alerta.page.scss'],\n})\nexport class AlertaPage implements OnInit {\n  public entidad:string;\n  public segundos = 10;\n  public confirma = true;\n  public inicio = false;\n\n  constructor(public menu:MenuController,\n    public router: Router,\n    public toastController:ToastController,\n    private callNumber: CallNumber,\n    public _geo:GeolocationService,\n    public _notification:NotificationService,\n    public _user:UserService) {}\n    ngOnInit(){\n      if(!this._user.empresa){\n        console.log(\"sin empresa seleccionada\")\n        this.router.navigate(['/bienvenida']);\n      }\n      console.log(this._user.rut)\n    }\n  openMenu() {\n    this.menu.enable(true, 'first');    \n    this.menu.open('first');\n  }\n  alerta(){\n    this.segundos = 10;\n    this.conteo();\n  }\n\n  async conteo(){    \n    this.confirma = true;\n    this.inicio = true;\n    await this.delay(1)\n    this.segundos--\n    await this.delay(1)\n    this.segundos--\n    await this.delay(1)\n    this.segundos--\n    await this.delay(1)\n    this.segundos--\n    await this.delay(1)\n    this.segundos--\n    await this.delay(1)\n    this.segundos--\n    await this.delay(1)\n    this.segundos--\n    await this.delay(1)\n    this.segundos--\n    await this.delay(1)\n    this.segundos--\n    await this.delay(1)\n    this.segundos--\n    this.inicio = false;\n    if(this.confirma){\n      this.enviar()\n    }\n    else{\n      console.log(\"se cancelo\")\n    }\n  }\n  async delay(n){\n    return new Promise(function(resolve){\n        setTimeout(resolve,n*1000);\n    });\n  }  \n  async enviar(){   \n    let input = {usuario:this._user.user.rut}\n    this._geo.generaAlerta(input).subscribe(async (res) => {  \n      console.log(res) \n      if(res.resultado==\"OK\"){\n        this.router.navigate(['/detalle-alerta/'+res.alerta]);\n        const toast = await this.toastController.create({\n          header:'Emergencia Alertada',\n          message: 'Ha sido Enviada la alerta',\n          position: 'bottom',\n          duration: 3000,\n          animated:true,\n          translucent:true\n        });\n        await toast.present();\n      }else{\n        const toast = await this.toastController.create({\n          header:'Emergencia NO Alertada',\n          message: 'INTENTALO NUEVAMENTE',\n          position: 'bottom',\n          duration: 3000,\n          animated:true,\n          translucent:true\n        });\n        await toast.present();\n      }\n    });\n    this.llamar();\n  }\n  async cancelar(){\n    const toast = await this.toastController.create({\n      header:'Emergencia Cancelada',\n      message: 'No se ha alertado a ninguna entidad',\n      position: 'bottom',\n      duration: 3000,\n      animated:true,\n      translucent:true\n    });\n    await toast.present();\n    this.confirma=false;\n    this.inicio = false;\n  }\n\n  \n  async llamar(){\n    var respuesta;\n    this.callNumber.callNumber(\"+56964506888\", true)\n    .then(res => respuesta=res)\n    .catch(err => respuesta=err);\n  }\n\n}\n","export default \".new-background-color {\\n  --background: #5501bc;\\n}\\n\\nion-content {\\n  --background: transparent;\\n}\\n\\nion-toolbar ion-button {\\n  --background:transparent;\\n}\\n\\nion-title.md.title-default.hydrated {\\n  color: #fff;\\n  text-align: left;\\n}\\n\\n.alerta {\\n  background: red;\\n  width: 200px;\\n  height: 200px;\\n  border-radius: 50%;\\n  color: #fff;\\n  font-size: xx-large;\\n  margin: 10% 0 0px 25%;\\n}\\n\\nbutton:hover {\\n  background: #f44336;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFsZXJ0YS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxxQkFBQTtBQUNKOztBQUNBO0VBQ0kseUJBQUE7QUFFSjs7QUFBQTtFQUNJLHdCQUFBO0FBR0o7O0FBREE7RUFDSSxXQUFBO0VBQ0EsZ0JBQUE7QUFJSjs7QUFEQTtFQUNJLGVBQUE7RUFDQSxZQUFBO0VBQ0EsYUFBQTtFQUNBLGtCQUFBO0VBQ0EsV0FBQTtFQUNBLG1CQUFBO0VBQ0EscUJBQUE7QUFJSjs7QUFGQTtFQUNJLG1CQUFBO0FBS0oiLCJmaWxlIjoiYWxlcnRhLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5uZXctYmFja2dyb3VuZC1jb2xvcntcclxuICAgIC0tYmFja2dyb3VuZDogIzU1MDFiYztcclxufVxyXG5pb24tY29udGVudCB7XHJcbiAgICAtLWJhY2tncm91bmQ6IHRyYW5zcGFyZW50OyBcclxufVxyXG5pb24tdG9vbGJhciBpb24tYnV0dG9ue1xyXG4gICAgLS1iYWNrZ3JvdW5kOnRyYW5zcGFyZW50O1xyXG59XHJcbmlvbi10aXRsZS5tZC50aXRsZS1kZWZhdWx0Lmh5ZHJhdGVkIHtcclxuICAgIGNvbG9yOiAjZmZmO1xyXG4gICAgdGV4dC1hbGlnbjogbGVmdDtcclxufVxyXG5cclxuLmFsZXJ0YSB7XHJcbiAgICBiYWNrZ3JvdW5kOiByZWQ7XHJcbiAgICB3aWR0aDogMjAwcHg7XHJcbiAgICBoZWlnaHQ6IDIwMHB4O1xyXG4gICAgYm9yZGVyLXJhZGl1czogNTAlO1xyXG4gICAgY29sb3I6ICNmZmY7XHJcbiAgICBmb250LXNpemU6IHh4LWxhcmdlO1xyXG4gICAgbWFyZ2luOiAxMCUgMCAwcHggMjUlO1xyXG59XHJcbmJ1dHRvbjpob3ZlciB7XHJcbiAgICBiYWNrZ3JvdW5kOiAjZjQ0MzM2O1xyXG59XHJcblxyXG4iXX0= */\";","export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar  class=\\\"new-background-color\\\">\\n    <ion-title>\\n      Alerta   \\n    </ion-title>\\n    <ion-button slot=\\\"end\\\" (click)=\\\"openMenu()\\\">\\n      <ion-icon  name=\\\"menu-outline\\\"></ion-icon>     \\n    </ion-button>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n\\n  <button class=\\\"alerta\\\" (click)=\\\"alerta()\\\" > Alertar </button>\\n\\n  <div *ngIf=\\\"inicio\\\"  style=\\\"text-align: center;\\\">\\n    <p>se enviará una alerta en:</p>\\n    <h1>{{segundos}}</h1>\\n    <p>si desea cancelar haga click en el siguiente boton</p>\\n    <ion-button expand=\\\"full\\\" color=\\\"primary\\\" (click)=\\\"cancelar()\\\" > Cancelar </ion-button>\\n  </div>\\n  \\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}